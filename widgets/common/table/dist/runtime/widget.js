System.register(["jimu-core","jimu-ui","jimu-arcgis"],(function(e){var t,n,a;return{setters:[function(e){t=e},function(e){n=e},function(e){a=e}],execute:function(){e(function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=392)}({0:function(e,n){e.exports=t},1:function(e,t){e.exports=n},101:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M3.88 12.14c.16.185.16.486 0 .671l-1.64 1.91a.738.738 0 01-1.155 0L.12 13.599a.532.532 0 010-.672.369.369 0 01.577 0l.965 1.124 1.641-1.91a.369.369 0 01.577 0zM15.5 13a.5.5 0 110 1h-9a.5.5 0 110-1h9zM3.88 6.14c.16.185.16.486 0 .671l-1.64 1.91a.738.738 0 01-1.155 0L.12 7.599a.532.532 0 010-.672.369.369 0 01.577 0l.965 1.124 1.641-1.91a.369.369 0 01.577 0zM15.5 7a.5.5 0 110 1h-9a.5.5 0 010-1h9zM3.88.14c.16.185.16.486 0 .671l-1.64 1.91a.738.738 0 01-1.155 0L.12 1.599a.532.532 0 010-.672.369.369 0 01.577 0l.965 1.124L3.303.14a.369.369 0 01.577 0zM15.5 1a.5.5 0 110 1h-9a.5.5 0 010-1h9z" fill="#000" fill-rule="evenodd"></path></svg>'},301:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M10 0c.796 0 1.5.47 1.5 1.167V3h4a.5.5 0 010 1H14l-.929 11.077a1 1 0 01-.878.916l-.119.007H3.926a1 1 0 01-.997-.923L2 4H.5a.5.5 0 010-1h4V1.167C4.5.469 5.204 0 6 0h4zm2.997 4H3.003l.923 11h8.148l.923-11zm-2.889 3l.892.87-3.325 3.73L5 8.991l.831-.933 1.783 1.74L10.108 7zM5.5 1v2h5V1c0-.04-5-.04-5 0z" fill="#000" fill-rule="nonzero"></path></svg>'},302:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13.444 3.582A7.011 7.011 0 008 1 7.014 7.014 0 001.05 7.03c-.017.122-.031.281-.044.477A.525.525 0 01.481 8 .48.48 0 010 7.492c.01-.195.024-.354.039-.476C.526 3.062 3.904 0 8 0c2.482 0 4.7 1.124 6.172 2.89l.19-1.356a.502.502 0 01.994.138l-.441 3.126-3.03-.425a.5.5 0 01.14-.99l1.419.199zM1.936 13.236l-.163 1.322a.502.502 0 01-.996-.121l.387-3.133 3.036.371a.5.5 0 01-.122.993l-1.463-.179A7.01 7.01 0 008 15a7.014 7.014 0 006.947-6c.019-.128.034-.297.048-.507A.526.526 0 0115.519 8a.48.48 0 01.48.507 7.579 7.579 0 01-.042.505C15.458 12.952 12.087 16 8 16a8.01 8.01 0 01-6.064-2.764z" fill="#000" fill-rule="nonzero"></path></svg>'},303:function(e,t){e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16 0H0v1h16V0zM8 6c2.583 0 5.166 1.45 7.75 4.349a.972.972 0 010 1.302C13.166 14.551 10.583 16 8 16S2.834 14.55.25 11.651a.972.972 0 010-1.302C2.834 7.449 5.417 6 8 6zm0 1c-2.237 0-4.558 1.303-6.961 4C3.442 13.697 5.763 15 8 15s4.558-1.303 6.961-4C12.558 8.303 10.237 7 8 7zm-3 4a3 3 0 106 0 3 3 0 00-6 0zm3 2a2 2 0 100-4 2 2 0 000 4zM0 3h13v1H0V3zm3 3H0v1h3V6z" fill="#000"></path></svg>'},304:function(e,t){e.exports='<svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 1h16a1 1 0 011 1v5H1V2a1 1 0 011-1zm11 7H7v3h6V8zm0 4H7v3h6v-3zm1 3v-3h5v3h-5zm-1 1H7v3h6v-3zm1 3h4a1 1 0 001-1v-2h-5v3zm0-8V8h5v3h-5zM1 8h5v3H1V8zm0 4h5v3H1v-3zm0 4h5v3H2a1 1 0 01-1-1v-2zM0 2a2 2 0 012-2h16a2 2 0 012 2v16a2 2 0 01-2 2H2a2 2 0 01-2-2V2z" fill="#000"></path></svg>'},392:function(e,t,n){"use strict";n.r(t);var a,o,i,l,r,s,c,d,u=n(0),h=n(55),p=n(4),g={_widgetLabel:"Table (beta)",_widgetDescription:"This is an interactive table widget",showSelection:"Show selection",showAllRecords:"Show all records",clearSelection:"Clear selection",refresh:"Refresh",showHideCols:"Show/hide columns"},b=n(1);!function(e){e.Small="SMALL",e.Medium="MEDIUM",e.Large="LARGE"}(a||(a={})),function(e){e.String="STRING",e.Number="NUMBER",e.Date="DATE"}(o||(o={})),function(e){e.Blob="esriFieldTypeBlob",e.Date="esriFieldTypeDate",e.Double="esriFieldTypeDouble",e.Geometry="esriFieldTypeGeometry",e.GlobalID="esriFieldTypeGlobalID",e.GUID="esriFieldTypeGUID",e.Integer="esriFieldTypeInteger",e.OID="esriFieldTypeOID",e.Raster="esriFieldTypeRaster",e.Single="esriFieldTypeSingle",e.SmallInteger="esriFieldTypeSmallInteger",e.String="esriFieldTypeString",e.XML="esriFieldTypeXML"}(i||(i={})),function(e){e.Fetching="FETCHING",e.Success="SUCCESS",e.Error="ERROR"}(l||(l={})),function(e){e.Design="DESIGN",e.Run="RUN"}(r||(r={})),function(e){e.Opened="OPENED",e.Active="ACTIVE",e.Closed="CLOSED"}(s||(s={})),function(e){e.None="NONE",e.Page="PAGE",e.Dialog="DIALOG",e.View="VIEW",e.WebAddress="WEB_ADDRESS"}(c||(c={})),function(e){e.Normal="NORMAL",e.Layout="LAYOUT"}(d||(d={}));var m,f;!function(e){e.Header="HEADER",e.Footer="FOOTER",e.Body="BODY"}(m||(m={})),function(e){e.Http="http:",e.Https="https:"}(f||(f={}));var v,x;!function(e){e.Image="IMAGE",e.Config="CONFIG"}(v||(v={})),function(e){e.Primary="PRIMARY",e.Secondary="SECONDARY",e.Image="IMAGE",e.Donut="DONUT"}(x||(x={}));var w=[576,992],y={};y[a.Large]=[{width:1024,height:768},{width:1280,height:800},{width:1280,height:1024},{width:1366,height:768},{width:1440,height:900},{width:1536,height:864},{width:1600,height:900},{width:1920,height:1080}],y[a.Medium]=[{width:601,height:962},{width:600,height:1024},{width:768,height:1024},{width:800,height:1280},{width:834,height:1112}],y[a.Small]=[{width:360,height:640},{width:360,height:720},{width:360,height:740},{width:375,height:667},{width:414,height:736}];var S,j,C,O=(S=function(e,t){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}S(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),T=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},I=n(101),z=n(301),F=n(302),M=n(303),D=function(e){function t(t){var a=e.call(this,t)||this;return a.FeatureTable=null,a.FeatureLayer=null,a.onToolStyleChange=function(e,t){e<w[0]?a.setState({mobileFlag:!0}):a.setState({mobileFlag:!1})},a.subSet=function(e,t){var n=e.map(JSON.stringify),a=t.map(JSON.stringify);return n.concat(a).filter((function(e,t,n){return n.indexOf(e)===n.lastIndexOf(e)})).map(JSON.parse)},a.onDataSourceCreated=function(e){a.setState({dataSource:e},(function(){a.destoryTable().then((function(){a.createTable()}))}))},a.onDataSourceInfoChange=function(e){var t,n=a.state.dataSource,o=n&&n.getSelectedRecords();if(o&&0!==o.length){var i=o[0],l=i&&i.feature;a.table&&a.table.selectRows(l)}else if((null===(t=null==e?void 0:e.selectedIds)||void 0===t?void 0:t.length)>0){var r=e.selectedIds[0];n&&n.queryById(r).then((function(e){if(e&&e.feature){var t=e.feature;a.table&&a.table.selectRows(t)}}))}var s=n&&n.getCurrentQueryParams();a.searchTable(s)},a.searchTable=function(e){a.table&&a.table.layer&&(a.table.layer.definitionExpression=e.where)},a.getFeatureLayer=function(e){var t;return(t=e.layer?e.layer:e.itemId?new a.FeatureLayer({portalItem:{id:e.itemId,portal:{url:e.portalUrl}}}):new a.FeatureLayer({url:e.url})).load().then((function(){return Promise.resolve(t)}))},a.createTable=function(){var e=a.props,t=e.config,n=e.id,o=e.theme,i=t.layersConfig,l=a.state,r=l.dataSource,s=l.activeTabId;a.setState({creatingFlag:!0}),a.createDomStyle(o);var c=i.asMutable({deep:!0}).find((function(e){return e.id===s}));if(c){var d;0===document.getElementsByClassName("table-container-"+n).length?((d=document&&document.createElement("div")).className="table-container-"+n,a.refs.tableContainer&&a.refs.tableContainer.appendChild(d)):d=document.getElementsByClassName("table-container-"+n)[0];var h=a.subSet(c.allFields,c.tableFields).map((function(e){return e.jimuName})),p=c.tableFields.map((function(e){return{name:e.jimuName,label:e.alias,visible:h.indexOf(e.jimuName)<0}})),g=[];c.enableSelect&&(g=g.concat([{label:a.formatMessage("showSelection")+"/"+a.formatMessage("all").toLowerCase(),iconClass:"widget-table-tool-icon-show-selection",clickFunction:function(){a.onShowSelection()}},{label:a.formatMessage("clearSelection"),iconClass:"widget-table-tool-icon-selection-clear",clickFunction:function(){a.onSelectionClear()}}])),c.enableRefresh&&g.push({label:a.formatMessage("refresh"),iconClass:"widget-table-tool-icon-refresh",clickFunction:function(){a.onTableRefresh()}}),g.push({label:a.formatMessage("showHideCols"),iconClass:"widget-table-tool-icon-show-hide-cols",clickFunction:function(){a.popupShowHideCols()}}),r&&a.getFeatureLayer(r).then((function(e){a.table=new a.FeatureTable({layer:e,container:d,visibleElements:{header:!0,menu:!0,menuItems:{clearSelection:!1,refreshData:!1,toggleColumns:!1}},menuConfig:{items:g},fieldConfigs:p,attachmentsEnabled:c.enableAttachements,editingEnabled:c.enableEdit});var t=r.getRealQueryParams({where:"1=1"},"query");a.table&&a.table.layer&&(a.table.layer.definitionExpression=t.where),a.table.grid.visibleElements.selectionColumn=!1,c.enableSelect&&a.table.grid.on("row-click",(function(e){var t,o,i=e.context,l=(e.native,i.item.feature);if(!i.selected){var s=(null===(o=null===(t=r)||void 0===t?void 0:t.layer)||void 0===o?void 0:o.objectIdField)||"OBJECTID";r.query({where:s+" = "+l.attributes[s],returnGeometry:!0}).then((function(e){if(e.records){var t=e.records;u.MessageManager.getInstance().publishMessage(new u.DataRecordsSelectionChangeMessage(n,e.records)),r.selectRecordsByIds(t.map((function(e){return e.getId()})))}}))}i.selected?a.table.deselectRows(l):a.table.selectRows(l)})),a.setState({creatingFlag:!1})}))}},a.createDomStyle=function(e){var t,n,a=null===(n=null===(t=Object(u.getAppStore)().getState())||void 0===t?void 0:t.appConfig)||void 0===n?void 0:n.theme,o=document.getElementById("exb-grid-styles"),i=document.getElementById("exb-sorter-styles");o&&o.remove(),i&&i.remove();var l=document&&document.createElement("dom-module");l.setAttribute("id","exb-grid-styles"),l.setAttribute("theme-for","vaadin-grid");var r=document&&document.createElement("dom-module");r.setAttribute("id","exb-sorter-styles"),r.setAttribute("theme-for","vaadin-grid-sorter");var s='<template>\n      <style>\n        [part~="header-cell"] {\n          color: '+e.colors.palette.dark[700]+";\n          background-color: "+e.colors.palette.light[100]+";\n        }\n      </style>\n    </template>",c="<template>\n      <style>\n        :host([direction]) {\n          color: "+e.colors.palette.dark[700]+";\n        }\n      </style>\n    </template>";switch(a){case"themes/default/":case"themes/shared-theme/":case"themes/ink/":s='<template>\n          <style>\n            [part~="header-cell"] {\n              color: '+e.colors.palette.dark[700]+";\n              background-color: "+e.colors.palette.light[100]+";\n            }\n          </style>\n        </template>";break;case"themes/dark/":case"themes/morandi/":s='<template>\n          <style>\n            [part~="header-cell"] {\n              color: '+e.colors.palette.dark[700]+";\n              background-color: "+e.colors.palette.light[300]+";\n            }\n          </style>\n        </template>",c="<template>\n          <style>\n            :host([direction]) {\n              color: "+e.colors.palette.dark[700]+";\n            }\n          </style>\n        </template>";break;case"themes/vivid/":s='<template>\n          <style>\n            [part~="header-cell"] {\n              color: '+e.colors.palette.dark[700]+";\n              background-color: "+e.colors.palette.light[200]+";\n            }\n          </style>\n        </template>",c="<template>\n          <style>\n            :host([direction]) {\n              color: "+e.colors.palette.dark[700]+";\n            }\n          </style>\n        </template>"}l.innerHTML=s,r.innerHTML=c,document.head.appendChild(l),document.head.appendChild(r)},a.formatMessage=function(e,t){var n=Object.assign({},g,b.defaultMessages);return a.props.intl.formatMessage({id:e,defaultMessage:n[e]},t)},a.onTagClick=function(e){var t=a.props.id;a.setState({activeTabId:e,selectQueryFalg:!1,tableShowColumns:void 0}),a.props.dispatch(u.appActions.widgetStatePropChange(t,"activeTabId",e))},a.handleTagChange=function(e){var t,n=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value,o=a.props.id;a.setState({activeTabId:n,selectQueryFalg:!1}),a.props.dispatch(u.appActions.widgetStatePropChange(o,"activeTabId",n))},a.onShowSelection=function(){var e,t,n=a.state,o=n.dataSource,i=n.selectQueryFalg;if(i)a.table.layer.definitionExpression=void 0;else{var l=a.table.grid.selectedItems.items;if(0===l.length)return;var r=(null===(t=null===(e=o)||void 0===e?void 0:e.layer)||void 0===t?void 0:t.objectIdField)||"OBJECTID",s=r+" IN ("+l.map((function(e){var t;return(null===(t=e.feature)||void 0===t?void 0:t.attributes[r])||e.objectId})).join()+")";a.table.layer.definitionExpression=s}a.setState({selectQueryFalg:!i})},a.onSelectionClear=function(){a.table&&a.table.clearSelection()},a.onTableRefresh=function(){a.table&&a.table.refresh()},a.popupShowHideCols=function(){var e=a.refs.advancedSelect.getElementsByTagName("button")[0];e&&e.click()},a.getQueryOptions=function(e){var t="1=1",n=a.props,o=n.useDataSources,i=n.id,l=a.state,r=l.searchText,s=l.dataSource,c=o&&o[0];return s&&c&&s.query?r?(e.enableSearch&&e.searchFields&&(t=(t||"1=1")+" AND ",t+="("+e.searchFields.split(",").map((function(t){return e.searchExact?t+" = '"+r+"'":t+" LIKE '%"+r+"%'"})).join(" OR ")+")"),s.getRealQueryParams({where:t},"load",{widgetId:i})):s.getRealQueryParams({where:t},"load",{widgetId:i}):null},a.handleChange=function(e){e?a.setState({searchText:e}):a.setState({searchText:e},(function(){a.handleSubmit()}))},a.handleSubmit=function(){var e=a.props.config.layersConfig.find((function(e){return e.id===a.state.activeTabId})),t=a.getQueryOptions(e);a.setState({query:t.where})},a.onKeyUp=function(e){e&&e.target&&13===e.keyCode&&a.handleSubmit()},a.renderSearchTools=function(){var e=a.state.searchText,t=a.props.theme;return Object(u.jsx)("div",{className:"table-search-div"},Object(u.jsx)("div",{className:"d-flex align-items-center table-search"},Object(u.jsx)(b.Button,{type:"tertiary",icon:!0,size:"sm",onClick:function(e){return a.handleSubmit()},className:"search-icon"},Object(u.jsx)(b.Icon,{size:16,icon:n(79),color:t.colors.palette.light[800]})),Object(u.jsx)(b.TextInput,{className:"search-input",placeholder:a.formatMessage("search"),onChange:function(e){return a.handleChange(e.target.value)},value:e||"",onKeyDown:function(e){return a.onKeyUp(e)}})))},a.getInitFields=function(){var e=a.state.activeTabId,t=["CreationDate","Creator","EditDate","Editor","GlobalID"],n=a.props.config.layersConfig.find((function(t){return t.id===e})).tableFields,o=[];for(var i in n){var l=n[i];t.indexOf(l.name)<0&&o.push({value:l.name,label:l.alias})}return o},a.onValueChangeFromRuntime=function(e){e||(e=[]);var t=a.state.tableShowColumns,n=a.getInitFields(),o=t||n,i=e.length>o.length;a.subSet(o,e).map((function(e){i?a.table.showColumn(e.value):a.table.hideColumn(e.value)})),a.setState({tableShowColumns:e})},a.getStyle=function(e){var t=a.props.id,n=a.state.mobileFlag;return Object(u.css)(j||(j=T(["\n      "," {\n        .table-indent{\n          width: calc(100% - 32px);\n          height: calc(100% - 26px);\n          margin: 10px 16px 16px;\n        }\n        .nav-underline{\n          border-bottom: 1px solid ",";\n        }\n        .nav-item + .nav-item{\n          margin-left: 0;\n        }\n        .csv-dropdown-con{\n          button{\n            border-radius: 13px;\n          }\n        }\n        .vertical-tag-list{\n          width: 20%;\n          display: inline-block;\n          .tagBtn{\n            width: 100%;\n          }\n        }\n        .horizontal-tag-list{\n          .tagBtn{\n            width: 150px;\n          }\n          .tab-content{\n            height: 8px;\n          }\n        }\n        .vertical-tag-list,\n        .horizontal-tag-list{\n          margin-bottom: 4px;\n          .activeBtn{\n            color: #fff;\n            background-color: #076fe5;\n          }\n        }\n        .dropdown-tag-list{\n          height: 40px;\n          margin-bottom: 4px;\n          .dropdown-button{\n            height: 30px;\n          }\n        }\n        .vertical-render-con{\n          width: 80%;\n          position: absolute;\n          left: 20%;\n          height: 100%;\n          top: 0;\n        }\n        .dropdown-render-con,\n        .horizontal-render-con{\n          width: 100%;\n          height: 100%;\n        }\n        .top-button-list{\n          margin: 8px 0;\n          position: absolute;\n          right: 17px;\n          top: 47px;\n          ",";\n          .top-button{\n            display: inline-flex;\n            button{\n              width: 32px;\n              height: 32px;\n            }\n          }\n        }\n        .table-search-div{\n          position: absolute;\n          left: 20px;\n          .table-search{\n            .search-icon{\n              z-index: 2;\n            }\n            .search-input{\n              padding-left: 30px;\n              margin-left: -30px;\n            }\n          }\n        }\n        .table-con{\n          width: 100%;\n          height: calc(100% - 46px);\n          .esri-feature-table__loader-container{\n            position: absolute;\n            left: 50%;\n            top: 50%;\n            margin-left: -16px;\n            margin-top: -20px;\n            z-index: 2;\n          }\n          .esri-feature-table__title{\n            display: none\n          }\n          .esri-feature-table__menu{\n            position: absolute;\n            right: 17px;\n            top: 51px;\n            ",";\n          }\n          .esri-column__sorter{\n            overflow-x: hidden;\n          }\n        }\n        .adv-select-con{\n          width: 200px;\n          visibility: hidden;\n          position: absolute;\n          right: 17px;\n          top: 56px;\n        }\n        .ds-container{\n          position: absolute;\n          display: none;\n        }\n      }\n    "],["\n      "," {\n        .table-indent{\n          width: calc(100% - 32px);\n          height: calc(100% - 26px);\n          margin: 10px 16px 16px;\n        }\n        .nav-underline{\n          border-bottom: 1px solid ",";\n        }\n        .nav-item + .nav-item{\n          margin-left: 0;\n        }\n        .csv-dropdown-con{\n          button{\n            border-radius: 13px;\n          }\n        }\n        .vertical-tag-list{\n          width: 20%;\n          display: inline-block;\n          .tagBtn{\n            width: 100%;\n          }\n        }\n        .horizontal-tag-list{\n          .tagBtn{\n            width: 150px;\n          }\n          .tab-content{\n            height: 8px;\n          }\n        }\n        .vertical-tag-list,\n        .horizontal-tag-list{\n          margin-bottom: 4px;\n          .activeBtn{\n            color: #fff;\n            background-color: #076fe5;\n          }\n        }\n        .dropdown-tag-list{\n          height: 40px;\n          margin-bottom: 4px;\n          .dropdown-button{\n            height: 30px;\n          }\n        }\n        .vertical-render-con{\n          width: 80%;\n          position: absolute;\n          left: 20%;\n          height: 100%;\n          top: 0;\n        }\n        .dropdown-render-con,\n        .horizontal-render-con{\n          width: 100%;\n          height: 100%;\n        }\n        .top-button-list{\n          margin: 8px 0;\n          position: absolute;\n          right: 17px;\n          top: 47px;\n          ",";\n          .top-button{\n            display: inline-flex;\n            button{\n              width: 32px;\n              height: 32px;\n            }\n          }\n        }\n        .table-search-div{\n          position: absolute;\n          left: 20px;\n          .table-search{\n            .search-icon{\n              z-index: 2;\n            }\n            .search-input{\n              padding-left: 30px;\n              margin-left: -30px;\n            }\n          }\n        }\n        .table-con{\n          width: 100%;\n          height: calc(100% - 46px);\n          .esri-feature-table__loader-container{\n            position: absolute;\n            left: 50%;\n            top: 50%;\n            margin-left: -16px;\n            margin-top: -20px;\n            z-index: 2;\n          }\n          .esri-feature-table__title{\n            display: none\n          }\n          .esri-feature-table__menu{\n            position: absolute;\n            right: 17px;\n            top: 51px;\n            ",";\n          }\n          .esri-column__sorter{\n            overflow-x: hidden;\n          }\n        }\n        .adv-select-con{\n          width: 200px;\n          visibility: hidden;\n          position: absolute;\n          right: 17px;\n          top: 56px;\n        }\n        .ds-container{\n          position: absolute;\n          display: none;\n        }\n      }\n    "])),"&.table-widget-"+t,e.colors.palette.light[300],n&&"display: none",!n&&"display: none")},a.getGlobalTableTools=function(e){return Object(u.css)(C||(C=T(["\n      .widget-table-tool-icon-show-selection{\n        background: url('data:image/svg+xml;utf8,","') no-repeat center;\n        background-size: 100%;\n        width: 16px;\n        height: 16px;\n      }\n      .widget-table-tool-icon-selection-clear{\n        background: url('data:image/svg+xml;utf8,","') no-repeat center;\n        background-size: 100%;\n        width: 16px;\n        height: 16px;\n      }\n      .widget-table-tool-icon-refresh{\n        background: url('data:image/svg+xml;utf8,","') no-repeat center;\n        background-size: 100%;\n        width: 16px;\n        height: 16px;\n      }\n      .widget-table-tool-icon-show-hide-cols{\n        background: url('data:image/svg+xml;utf8,","') no-repeat center;\n        background-size: 100%;\n        width: 16px;\n        height: 16px;\n      }\n      .esri-button-menu__item .esri-button-menu__item-label{\n        padding: 4px 15px !important;\n      }\n    "],["\n      .widget-table-tool-icon-show-selection{\n        background: url('data:image/svg+xml;utf8,","') no-repeat center;\n        background-size: 100%;\n        width: 16px;\n        height: 16px;\n      }\n      .widget-table-tool-icon-selection-clear{\n        background: url('data:image/svg+xml;utf8,","') no-repeat center;\n        background-size: 100%;\n        width: 16px;\n        height: 16px;\n      }\n      .widget-table-tool-icon-refresh{\n        background: url('data:image/svg+xml;utf8,","') no-repeat center;\n        background-size: 100%;\n        width: 16px;\n        height: 16px;\n      }\n      .widget-table-tool-icon-show-hide-cols{\n        background: url('data:image/svg+xml;utf8,","') no-repeat center;\n        background-size: 100%;\n        width: 16px;\n        height: 16px;\n      }\n      .esri-button-menu__item .esri-button-menu__item-label{\n        padding: 4px 15px !important;\n      }\n    "])),encodeURIComponent(I),encodeURIComponent(z),encodeURIComponent(F),encodeURIComponent(M))},a.state={apiLoaded:!1,dataSource:void 0,activeTabId:void 0,downloadOpen:!1,searchText:"",query:void 0,selectQueryFalg:!1,mobileFlag:!1,tableShowColumns:void 0,creatingFlag:!1},a.debounceOnResize=u.lodash.debounce((function(e,t){return a.onToolStyleChange(e,t)}),200),a}return O(t,e),t.getDerivedStateFromProps=function(e,t){var n=e.config.layersConfig,a=t.activeTabId;return!a||n.findIndex((function(e){return e.id===a}))<0?{activeTabId:n.length>0?n[0].id:void 0}:null},t.prototype.componentDidMount=function(){var e=this;this.state.apiLoaded||Object(p.loadArcGISJSAPIModules)(["esri/widgets/FeatureTable","esri/layers/FeatureLayer"]).then((function(t){e.FeatureTable=t[0],e.FeatureLayer=t[1],e.setState({apiLoaded:!0}),e.createTable()}))},t.prototype.componentDidUpdate=function(e,t){var n,a,o=this,i=this.state.creatingFlag,l=this.props.id;if((null===(a=null===(n=this.props)||void 0===n?void 0:n.stateProps)||void 0===a?void 0:a.removeLayerFlag)||!1){var r=document.getElementsByClassName("esri-popover esri-popover--open");r&&r.length>0&&r[0].remove(),this.props.dispatch(u.appActions.widgetStatePropChange(l,"removeLayerFlag",!1))}var s=e.config.layersConfig.find((function(e){return e.id===t.activeTabId})),c=this.props.config.layersConfig.find((function(e){return e.id===o.state.activeTabId}));if(s&&c){var d=["enableAttachements","enableEdit","allowCsv","enableSearch","searchFields","enableRefresh","enableSelect","tableFields"],h=!1;for(var p in d){var g=d[p];if(s[g]!==c[g]){h=!0;break}}s.id===c.id&&h&&!i&&this.setState({searchText:"",query:void 0,tableShowColumns:void 0},(function(){o.destoryTable().then((function(){o.createTable()}))}))}},t.prototype.destoryTable=function(){return this.table&&!this.table.destroyed&&this.table.destroy(),Promise.resolve()},t.prototype.render=function(){var e,t=this.state,a=t.activeTabId,o=t.query,i=t.dataSource,l=t.selectQueryFalg,r=t.tableShowColumns,s=this.props,c=s.config,d=s.id,p=s.theme,g=c.layersConfig,m=c.arrangeType,f=g.find((function(e){return e.id===a}));g.length>0&&(e=f?f.useDataSource:g[0].useDataSource);var v=Object(u.classNames)("jimu-widget","widget-table","surface-1","table-widget-"+d);if(!e)return Object(u.jsx)(b.WidgetPlaceholder,{widgetId:d,icon:n(304),message:this.formatMessage("_widgetLabel")});var x=m===h.a.Tabs,w=f.tableFields.map((function(e){return{value:e.name,label:e.alias}})),y=this.getInitFields();return Object(u.jsx)("div",{className:v,css:this.getStyle(p)},Object(u.jsx)("div",{className:"table-indent"},Object(u.jsx)("div",{className:x?"horizontal-tag-list":"dropdown-tag-list"},x?Object(u.jsx)(b.Tabs,{underline:!0,onTabSelect:this.onTagClick},g.map((function(e){return Object(u.jsx)(b.Tab,{key:e.id,id:e.id,defaultActive:e.id===a,title:e.name,className:"text-truncate tag-size"},Object(u.jsx)("div",{className:"mt-2"}))}))):Object(u.jsx)(b.Select,{size:"sm",value:a,onChange:this.handleTagChange,style:{width:120},className:"top-drop"},g.map((function(e){return Object(u.jsx)("option",{key:e.id,value:e.id,title:e.name},e.name)})))),Object(u.jsx)("div",{className:m===h.a.Tabs?"horizontal-render-con":"dropdown-render-con"},f.enableSearch&&f.searchFields&&this.renderSearchTools(),Object(u.jsx)("div",{className:"top-button-list"},f.enableSelect&&Object(u.jsx)("div",{className:"top-button ml-2"},Object(u.jsx)(b.Button,{size:"sm",onClick:this.onShowSelection,icon:!0,title:l?this.formatMessage("showAllRecords"):this.formatMessage("showSelection")},Object(u.jsx)(b.Icon,{icon:I,size:14}))),f.enableSelect&&Object(u.jsx)("div",{className:"top-button ml-2"},Object(u.jsx)(b.Button,{size:"sm",onClick:this.onSelectionClear,icon:!0,title:this.formatMessage("clearSelection")},Object(u.jsx)(b.Icon,{icon:z,size:14}))),f.enableRefresh&&Object(u.jsx)("div",{className:"top-button ml-2"},Object(u.jsx)(b.Button,{size:"sm",onClick:this.onTableRefresh,icon:!0,title:this.formatMessage("refresh")},Object(u.jsx)(b.Icon,{icon:F,size:14}))),Object(u.jsx)("div",{className:"top-button ml-2"},Object(u.jsx)(b.Button,{size:"sm",onClick:this.popupShowHideCols,icon:!0,title:this.formatMessage("showHideCols")},Object(u.jsx)(b.Icon,{icon:M,size:14})))),i&&Object(u.jsx)("div",{ref:"advancedSelect",className:"adv-select-con"},Object(u.jsx)(b.AdvancedSelect,{fluid:!0,dataSource:i,field:f.allFields[0],codedValues:w,isMultiple:!0,values:Object(u.Immutable)(r||y),isEmptyOptionHidden:!1,onChange:this.onValueChangeFromRuntime})),Object(u.jsx)("div",{ref:"tableContainer",className:"table-con"}),Object(u.jsx)("div",{className:"ds-container"},Object(u.jsx)(u.DataSourceComponent,{widgetId:d,query:i?{where:o}:null,useDataSource:Object(u.Immutable)(e),onDataSourceCreated:this.onDataSourceCreated,onDataSourceInfoChange:this.onDataSourceInfoChange})),Object(u.jsx)(u.Global,{styles:this.getGlobalTableTools(p)}),Object(u.jsx)(u.ReactResizeDetector,{handleWidth:!0,handleHeight:!0,onResize:this.debounceOnResize}))))},t}(u.React.PureComponent);t.default=D},4:function(e,t){e.exports=a},55:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Dropdown="DROPDOWN",e.Tabs="TABS"}(a||(a={}))},79:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M7 1a6 6 0 100 12A6 6 0 007 1zm0 13a7 7 0 115.621-2.828l-.222.284 3.405 3.404a.668.668 0 01-.944.944L11.456 12.4A6.974 6.974 0 017 14z" fill="#000" fill-rule="evenodd"></path></svg>'}}))}}}));