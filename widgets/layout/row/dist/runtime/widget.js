define(["jimu-core","jimu-ui","jimu-layouts/layout-runtime"],(function(t,e,n){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=543)}({0:function(e,n){e.exports=t},1:function(t,n){t.exports=e},117:function(t,e,n){"use strict";var i=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t};Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(0),s=n(28);e.ROW_STYLE=r.css(o||(o=i(["\n  width: 100%;\n  display: flex;\n  justify-content: center;\n\n  .offset-1 {\n    margin-left: 8.33333%;\n    margin-right: 0;\n  }\n  .offset-2 {\n    margin-left: 16.66667%;\n    margin-right: 0;\n  }\n  .offset-3 {\n    margin-left: 25%;\n    margin-right: 0;\n  }\n  .offset-4 {\n    margin-left: 33.33333%;\n    margin-right: 0;\n  }\n  .offset-5 {\n    margin-left: 41.66667%;\n    margin-right: 0;\n  }\n  .offset-6 {\n    margin-left: 50%;\n    margin-right: 0;\n  }\n  .offset-7 {\n    margin-left: 58.33333%;\n    margin-right: 0;\n  }\n  .offset-8 {\n    margin-left: 66.66667%;\n    margin-right: 0;\n  }\n  .offset-9 {\n    margin-left: 75%;\n    margin-right: 0;\n  }\n  .offset-10 {\n    margin-left: 83.33333%;\n    margin-right: 0;\n  }\n  .offset-11 {\n    margin-left: 91.66667%;\n    margin-right: 0;\n  }\n"],["\n  width: 100%;\n  display: flex;\n  justify-content: center;\n\n  .offset-1 {\n    margin-left: 8.33333%;\n    margin-right: 0;\n  }\n  .offset-2 {\n    margin-left: 16.66667%;\n    margin-right: 0;\n  }\n  .offset-3 {\n    margin-left: 25%;\n    margin-right: 0;\n  }\n  .offset-4 {\n    margin-left: 33.33333%;\n    margin-right: 0;\n  }\n  .offset-5 {\n    margin-left: 41.66667%;\n    margin-right: 0;\n  }\n  .offset-6 {\n    margin-left: 50%;\n    margin-right: 0;\n  }\n  .offset-7 {\n    margin-left: 58.33333%;\n    margin-right: 0;\n  }\n  .offset-8 {\n    margin-left: 66.66667%;\n    margin-right: 0;\n  }\n  .offset-9 {\n    margin-left: 75%;\n    margin-right: 0;\n  }\n  .offset-10 {\n    margin-left: 83.33333%;\n    margin-right: 0;\n  }\n  .offset-11 {\n    margin-left: 91.66667%;\n    margin-right: 0;\n  }\n"]))),e.flipRowItemPos=function(t){return r.Immutable(t).set("left",s.TOTAL_COLS-parseInt(t.left,10)-parseInt(t.width,10))}},2:function(t,e){t.exports=n},28:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MIN_SPAN=2,e.TOTAL_COLS=12},43:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(1);e.defaultConfig=i.Immutable({space:20,style:{padding:{number:[10],unit:o.UnitTypes.PIXEL}}}),e.DEFAULT_ROW_ITEM_SETTING={heightMode:"fixed",aspectRatio:1,offsetX:0,offsetY:0,style:{alignSelf:"flex-start"}}},543:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},a=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]])}return n};Object.defineProperty(e,"__esModule",{value:!0});var l,u=n(0),f=n(544),c=n(1),p=n(545),d=n(548),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(){var t=this.props,e=t.layouts,n=t.id,i=t.intl,o=t.builderSupportModules,h=a(t,["layouts","id","intl","builderSupportModules"]),g=window.jimuConfig.isInBuilder?o.widgetModules.RowLayoutBuilder:p.default;if(!g)return u.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},"No layout component!");var y=Object.keys(e)[0];return u.jsx("div",{className:"widget-row-layout d-flex justify-content-center d-flex w-100",css:u.css(l||(l=r(["height: 100%;"],["height: 100%;"])))},u.jsx(g,s({layouts:e[y],widgetId:n,config:this.props.config},h),u.jsx(c.WidgetPlaceholder,{icon:d,widgetId:n,style:{border:"none",pointerEvents:"none"},message:i.formatMessage({id:"tips",defaultMessage:f.default.tips})})))},e}(u.BaseWidget);e.default=h},544:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={_widgetLabel:"Row",widgetProperties:"Widget properties",widgetFunctions:"Widget functions",widgetName:"widget name:",widgetProps:"widget properties:",tips:"Row"}},545:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a,l=n(0),u=n(1),f=n(546),c=n(2),p=n(28),d=function(t){function e(e){var n=t.call(this,e)||this;return n.onResize=function(t,e){n.browserSizeMode===n.mainSizeMode&&(t||e)&&l.getAppStore().dispatch(l.appActions.widgetStatePropChange(n.props.widgetId,"height",e))},n.debounceResizeHandler=l.lodash.debounce(n.onResize,200),n}return o(e,t),e.prototype.findExtension=function(){var t,e=l.ExtensionManager.getInstance().getExtensions(""+l.extensionSpec.ExtensionPoints.LayoutTransformer);if(e&&e.length>0){var n=e.find((function(t){return"ROW"===t.layoutType}));this.layoutTransform=null===(t=n)||void 0===t?void 0:t.transformLayout}},e.prototype.collectRowItems=function(){var t=this.props,e=t.layout,n=t.layouts;this.layoutTransform||this.findExtension();var i=e;n[this.browserSizeMode]!==e.id&&this.layoutTransform&&(i=this.layoutTransform(e,this.mainSizeMode,this.browserSizeMode)),this.finalLayout=i;var o=i.order||[],r=[],s=[],a=0;return r.push(s),o.forEach((function(t){var e=i.content[t].bbox,n=parseInt(e.left,10),o=Math.floor(n/p.TOTAL_COLS);o>a&&(s=[],a=o,r.push(s)),s.push(t)})),r},e.prototype.createRow=function(){var t=this.props,e=t.layout,n=t.config,i=t.layouts;return l.jsx(f.Row,{layouts:i,layout:e,transformedLayout:this.finalLayout,config:n,theme:this.theme,isMultiRow:this.rows.length>1})},e.prototype.render=function(){var t=this,e=this.props,n=e.layout,i=e.className,o=e.config.style||{},f=s({},u.styleUtils.toCSSStyle(o));return l.jsx(c.PageContext.Consumer,null,(function(e){return t.browserSizeMode=e.browserSizeMode,t.mainSizeMode=e.mainSizeMode,t.theme=e.theme,t.rows=t.collectRowItems(),l.jsx("div",{className:l.classNames("layout d-flex",i),css:l.css(a||(a=r(["\n          width: 100%;\n        "],["\n          width: 100%;\n        "]))),style:f,"data-layoutid":n.id},t.createRow(),l.jsx(l.ReactResizeDetector,{handleHeight:!0,onResize:t.debounceResizeHandler}))}))},e}(l.React.PureComponent);e.default=l.ReactRedux.connect(c.utils.mapStateToLayoutProps)(d)},546:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t};Object.defineProperty(e,"__esModule",{value:!0});var s,a,l=n(0),u=n(547),f=n(2),c=n(117),p=function(t){function e(e){var n=t.call(this,e)||this;return n.flipLeftRight=f.utils.isRTL(),n}return o(e,t),e.prototype.collectBounds=function(){var t=this,e=this.props.transformedLayout,n=e.order||[];return this.childRects=[],n.forEach((function(n){var i,o,r=null===(o=null===(i=e.content)||void 0===i?void 0:i[n])||void 0===o?void 0:o.bbox;r&&t.childRects.push({layoutId:e.id,id:n,left:parseInt(r.left,10),width:parseInt(r.width,10),height:parseInt(r.height,10)})})),this.childRects.sort((function(t,e){return t.left-e.left}))},e.prototype.createItem=function(t,e,n){var i,o=this.props,r=o.layout,s=o.config,a=o.isMultiRow,f=t[e],c=s.space||0;if(0===e)i=f.left;else{var p=t[e-1];i=f.left-p.left-p.width}return l.jsx(u.default,{key:f.id,offset:i,span:f.width,isMultiRow:a,layoutId:r.id,layoutItemId:f.id,layoutItem:r.content[f.id],alignItems:n.alignItems,style:{paddingLeft:c/2,paddingRight:c/2}})},e.prototype.render=function(){var t=this,e=this.props,n=e.layout,i=e.className,o=e.config;this.collectBounds();var u=this.childRects,p=o.style||{},d=o.space||0;return l.jsx(f.PageContext.Consumer,null,(function(e){return l.jsx("div",{className:l.classNames("row-layout",i,{"row-rtl":t.flipLeftRight}),css:c.ROW_STYLE,"data-layoutid":n.id},l.jsx("div",{css:l.css(s||(s=r(["\n            width: 100%;\n            max-width: ",";\n          "],["\n            width: 100%;\n            max-width: ",";\n          "])),e.maxWidth>0?e.maxWidth+"px":"none")},u.length>0&&l.jsx(l.OneByOneAnimation,{className:l.classNames("row h-100 m-0",{"flex-nowrap":!t.props.isMultiRow}),css:l.css(a||(a=r(["\n                    position: relative;\n                    margin-left: ","px;\n                    margin-right: ","px;\n                    height: 100%;\n                  "],["\n                    position: relative;\n                    margin-left: ","px;\n                    margin-right: ","px;\n                    height: 100%;\n                  "])),-d/2,-d/2)},u.map((function(e,n){return t.createItem(u,n,p)})))))}))},e}(l.React.PureComponent);e.Row=p},547:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),a=n(2),l=n(2),u=n(43),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.calHeight=function(t,e){var n,i,o,r,s,a,u,f,c,p,d,h,g;return this.props.isMultiRow?{height:e.height,alignSelf:null!==(i=null===(n=t.style)||void 0===n?void 0:n.alignSelf)&&void 0!==i?i:"flex-start"}:"ratio"===t.heightMode?{alignSelf:null!==(r=null===(o=t.style)||void 0===o?void 0:o.alignSelf)&&void 0!==r?r:"flex-start"}:(null===(s=t.autoProps)||void 0===s?void 0:s.height)===l.LayoutItemSizeModes.Auto?{height:"auto",alignSelf:null!==(u=null===(a=t.style)||void 0===a?void 0:a.alignSelf)&&void 0!==u?u:"flex-start"}:(null===(f=t.autoProps)||void 0===f?void 0:f.height)===l.LayoutItemSizeModes.Custom?{height:e.height,alignSelf:null!==(p=null===(c=t.style)||void 0===c?void 0:c.alignSelf)&&void 0!==p?p:"flex-start"}:(null===(d=t.autoProps)||void 0===d?void 0:d.height)===l.LayoutItemSizeModes.Stretch||"fit"===t.heightMode?{alignSelf:"stretch"}:parseFloat(e.height)>0?{height:e.height,alignSelf:null!==(g=null===(h=t.style)||void 0===h?void 0:h.alignSelf)&&void 0!==g?g:"flex-start"}:{alignSelf:"stretch"}},e.prototype.render=function(){var t=this.props,e=t.span,n=t.offset,i=t.layoutId,o=t.layoutItem,f=t.style,c=t.animationStyle,p=t.isPlaying;if(!o||o.isPending)return null;var d=o.bbox,h=s.lodash.assign({},u.DEFAULT_ROW_ITEM_SETTING,o.setting),g=s.classNames("row-layout-item","col-"+e,"offset-"+n),y=r(r({},f),this.calHeight(h,d));(h.offsetX||h.offsetY)&&(y.transform="translate("+(h.offsetX||0)+"px, "+(h.offsetY||0)+"px)");var m=a.utils.parseAspectRatio(h.aspectRatio);return s.jsx(l.LayoutItem,{style:y,className:g,layoutId:i,layoutItemId:o.id,forceAspectRatio:"ratio"===h.heightMode,aspectRatio:m,onClick:this.props.onClick,animationStyle:c,isPlaying:p})},e}(s.React.PureComponent);e.default=f},548:function(t,e){t.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M11 2v13h-1V2H6v13H5V2H1v12a1 1 0 001 1h12a1 1 0 001-1V2h-4zM2 0h12a2 2 0 012 2v12a2 2 0 01-2 2H2a2 2 0 01-2-2V2a2 2 0 012-2z"></path></svg>'}})}));